<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>seqyuan</title><link href="jujuba.net/" rel="alternate"></link><link href="jujuba.net/feeds/all.atom.xml" rel="self"></link><id>jujuba.net/</id><updated>2019-12-15T00:00:00+08:00</updated><entry><title>Hi-C文库相关性分析</title><link href="jujuba.net/libcor.html" rel="alternate"></link><published>2019-12-15T00:00:00+08:00</published><updated>2019-12-15T00:00:00+08:00</updated><author><name>seqyuan</name></author><id>tag:None,2019-12-15:jujuba.net/libcor.html</id><summary type="html"></summary><content type="html">&lt;p&gt;Hi-C分析需要的测序量比较高，1个样本往往需要测序很多的数据量，1个Hi-C文库可测序的数据量有限（一般情况下100-300G PE150，超出这个量，多测的数据可能含有较高的PCR dup），所以1个样本往往需要建几个文库来保证总的测序量足够。相同样本不同文库产生的数据需要有比较高的重复性，才能用于后续分析&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;为了计算方便，开发了一个R脚本hicLibRepeatCor.R用于Hi-C文库相关性分析，计算两两Hi-C文库的cis矩阵相关性，对所有文库的相关性矩阵做聚类热图,用于衡量判断样本文库的重复性，和不同样本文库的差异&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;程序地址&lt;/h3&gt;
&lt;p&gt;https://gitlab.com/seqyuan/ctools/blob/master/module/CQC/libCor/hicLibRepeatCor.R&lt;/p&gt;
&lt;h3&gt;程序用法&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;Rscript hicLibRepeatCor.R &amp;lt;lib_matrix.list&amp;gt; &amp;lt;binsize&amp;gt; &amp;lt;outdir&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;参数说明&lt;/h3&gt;
&lt;h4&gt;lib_matrix.list&lt;/h4&gt;
&lt;p&gt;此参数为每一个文库的matrix列表，示例如下：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;wt1&lt;/th&gt;
&lt;th&gt;1000000&lt;/th&gt;
&lt;th&gt;/abspath/wt1_1000000_symmetric.matrix&lt;/th&gt;
&lt;th&gt;/abspath/wt1_1000000_abs.bed&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;wt2&lt;/td&gt;
&lt;td&gt;1000000&lt;/td&gt;
&lt;td&gt;/abspath/wt2_1000000_symmetric.matrix&lt;/td&gt;
&lt;td&gt;/abspath/wt2_1000000_abs.bed&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;tr1&lt;/td&gt;
&lt;td&gt;1000000&lt;/td&gt;
&lt;td&gt;/abspath/tr1_1000000_symmetric.matrix&lt;/td&gt;
&lt;td&gt;/abspath/tr1_1000000_abs.bed&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;tr2&lt;/td&gt;
&lt;td&gt;1000000&lt;/td&gt;
&lt;td&gt;/abspath/tr2_1000000_symmetric.matrix&lt;/td&gt;
&lt;td&gt;/abspath/tr2_1000000_abs.bed&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ol&gt;
&lt;li&gt;第一列：文库的命名&lt;/li&gt;
&lt;li&gt;第二列：对应行矩阵的bin size&lt;/li&gt;
&lt;li&gt;第三列：文库矩阵，格式同&lt;a href="http://nservant.github.io/HiC-Pro/RESULTS.html#intra-and-inter-chromosomal-contact-maps"&gt;HiC-Pro&lt;/a&gt;软件buildMatrix产生的3列矩阵的格式&lt;/li&gt;
&lt;li&gt;第四列：染色体位置与bin number对应关系bed文件，格式&lt;code&gt;HiC-Pro&lt;/code&gt;软件buildMatrix产生的bed文件&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;binsize&lt;/h4&gt;
&lt;p&gt;数字型，选择&lt;code&gt;lib_matrix.list&lt;/code&gt;参数中第二列与&lt;code&gt;binsize&lt;/code&gt;参数相同的matrix去做文库相关性分析&lt;/p&gt;
&lt;h4&gt;outdir&lt;/h4&gt;
&lt;p&gt;输出目录&lt;/p&gt;
&lt;h3&gt;输出结果示例&lt;/h3&gt;
&lt;p&gt;此程序会输出3个结果文件&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;pair.pdf&lt;/li&gt;
&lt;li&gt;corr_heatmap.pdf&lt;/li&gt;
&lt;li&gt;cor_matr.matrix&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;pair.pdf&lt;/h4&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://gitlab.com/seqyuan/ctools/raw/master/module/CQC/libCor/fig/pair.png"&gt;
&lt;img alt="avatar" src="https://gitlab.com/seqyuan/ctools/raw/master/module/CQC/libCor/fig/alllibpair.png"&gt;&lt;/p&gt;
&lt;h4&gt;corr_heatmap.pdf&lt;/h4&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://gitlab.com/seqyuan/ctools/raw/master/module/CQC/libCor/fig/corr_heatmap.png"&gt;
&lt;img alt="avatar" src="https://gitlab.com/seqyuan/ctools/raw/master/module/CQC/libCor/fig/alllib_corr_heatmap.png"&gt;&lt;/p&gt;
&lt;h4&gt;cor_matr.matrix&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;corr_heatmap.pdf&lt;/code&gt;的数据文件，对于有编程经验的用户可以自己再去根据自己的喜好去画热图&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;wt1&lt;/th&gt;
&lt;th&gt;wt2&lt;/th&gt;
&lt;th&gt;tr1&lt;/th&gt;
&lt;th&gt;tr2&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;wt1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0.994581416401839&lt;/td&gt;
&lt;td&gt;0.946872471200991&lt;/td&gt;
&lt;td&gt;0.946223805271397&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;wt2&lt;/td&gt;
&lt;td&gt;0.994581416401839&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0.947224994844614&lt;/td&gt;
&lt;td&gt;0.946685529296875&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;tr1&lt;/td&gt;
&lt;td&gt;0.946872471200991&lt;/td&gt;
&lt;td&gt;0.947224994844614&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0.995740232735047&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;tr2&lt;/td&gt;
&lt;td&gt;0.946223805271397&lt;/td&gt;
&lt;td&gt;0.946685529296875&lt;/td&gt;
&lt;td&gt;0.995740232735047&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;例如可以用以下python代码画图&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;mpl&lt;/span&gt;
&lt;span class="c1"&gt;# matplotlib.use(&amp;#39;TkAgg&amp;#39;) # for macbook&lt;/span&gt;
&lt;span class="c1"&gt;# matplotlib.use(&amp;#39;Agg&amp;#39;) # linux or win&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;seaborn&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;sns&lt;/span&gt;

&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_table&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;cor_matr.matrix&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;header&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;index_col&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;sns&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;clustermap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cmap&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;sns&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;color_palette&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;RdBu_r&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7000&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;效果&lt;/p&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://gitlab.com/seqyuan/ctools/raw/master/module/CQC/libCor/fig/sns_corr_heatmap.png"&gt;
&lt;img alt="avatar" src="https://gitlab.com/seqyuan/ctools/raw/master/module/CQC/libCor/fig/sns_6corr_heatmap.png"&gt;&lt;/p&gt;
&lt;h3&gt;程序依赖包&lt;/h3&gt;
&lt;p&gt;R环境需要安装以下两个R包才能使用此程序
&lt;em&gt;  &lt;a href="http://www.bioconductor.org/packages/release/bioc/html/HiTC.html"&gt;HiTC&lt;/a&gt;
&lt;/em&gt;  &lt;code&gt;pheatmap&lt;/code&gt;&lt;/p&gt;</content><category term="Hi-C"></category></entry><entry><title>supertools使用说明</title><link href="jujuba.net/supertools.html" rel="alternate"></link><published>2018-11-09T00:00:00+08:00</published><updated>2018-11-09T00:00:00+08:00</updated><author><name>seqyuan</name></author><id>tag:None,2018-11-09:jujuba.net/supertools.html</id><summary type="html">&lt;p&gt;supertools使用开发说明，适用于 cotools, tetools, pagtools, medtools, plotools&lt;/p&gt;</summary><content type="html">&lt;h1&gt;supertools使用&lt;/h1&gt;
&lt;h2&gt;网页检索&lt;/h2&gt;
&lt;p&gt;我们设置了网页服务使开发者和用户更好的互动，访问以下ip中的任何一个都能看到相应工具集的汇总&lt;/p&gt;
&lt;p&gt;&lt;a href="http://192.168.2.202:1900"&gt;tetools&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://192.168.2.202:1901"&gt;pagtools&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://192.168.2.202:1902"&gt;medtools&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://192.168.2.202:1903"&gt;plotools&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;空运行，帮助文档&lt;/h2&gt;
&lt;p&gt;空运行supertools，会显示帮助文档，如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nl"&gt;Program&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;tetools&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Tools&lt;/span&gt; &lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nl"&gt;Version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;0.0.1&lt;/span&gt;   &lt;span class="n"&gt;seqyuan&lt;/span&gt;&lt;span class="p"&gt;@&lt;/span&gt;&lt;span class="n"&gt;gmail&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;  &lt;span class="n"&gt;Nov&lt;/span&gt; &lt;span class="mi"&gt;08&lt;/span&gt; &lt;span class="mi"&gt;2018&lt;/span&gt;

&lt;span class="nl"&gt;Usage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;  &lt;span class="n"&gt;tetools&lt;/span&gt;  &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
                 &lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;addtool&lt;/span&gt;          &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;toolspath&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;            &lt;span class="n"&gt;Add&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="n"&gt;tool&lt;/span&gt; &lt;span class="n"&gt;or&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="n"&gt;version&lt;/span&gt;
                 &lt;span class="n"&gt;ut&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;updatetool&lt;/span&gt;       &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;toolspath&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;            &lt;span class="n"&gt;Update&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;tool&lt;/span&gt; &lt;span class="n"&gt;not&lt;/span&gt; &lt;span class="n"&gt;change&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;version&lt;/span&gt;
                 &lt;span class="n"&gt;am&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;addmodule&lt;/span&gt;        &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt; &lt;span class="n"&gt;description&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;   &lt;span class="n"&gt;Add&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="n"&gt;module&lt;/span&gt;

    &lt;span class="n"&gt;TAD&lt;/span&gt;             &lt;span class="n"&gt;TAD类个性化分析工具&lt;/span&gt;
    &lt;span class="n"&gt;compartment&lt;/span&gt;     &lt;span class="n"&gt;sfadf&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;查看某个module里所有的tool&lt;/h2&gt;
&lt;p&gt;运行 cotools modulename即可查看相应module里所有的tool，示例：
&lt;code&gt;tetools TAD&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$./tetools TAD

    Usage TAD:
        Jujube_pill     v0.0.1  吃枣药丸
        argtest         v0.0.1  argtest
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;查看某个tool的帮助文档&lt;/h2&gt;
&lt;p&gt;运行 &lt;code&gt;cotools modulename toolname&lt;/code&gt;即可查看相应tool的帮助信息，示例：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$./tetools TAD Jujube_pill

usage:
    python3 /Users/yuanzan/Documents/golang_programe/tetools/module/TAD/Jujube_pill/current/Jujube_pill/bin/Jujube_pill arg1 val1 arg2 val2
jujube pill

/Users/yuanzan/anaconda3/bin/python3 /Users/yuanzan/Documents/golang_programe/tetools/module/TAD/Jujube_pill/current/Jujube_pill/bin/Jujube_pill 
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;在运行命令的最后一行会提示实际要执行的程序&lt;/p&gt;
&lt;h2&gt;使用tool&lt;/h2&gt;
&lt;h3&gt;cotools的方式使用&lt;/h3&gt;
&lt;p&gt;首先执行&lt;code&gt;cotools modulename toolname&lt;/code&gt;查看tool的参数说明，然后根据参数说明直接在命令行输入即可，例如：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$./tetools TAD Jujube_pill ag1 
jujube pill

/Users/yuanzan/anaconda3/bin/python3 /Users/yuanzan/Documents/golang_programe/tetools/module/TAD/Jujube_pill/current/Jujube_pill/bin/Jujube_pill  ag1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;根据示例我们能清楚的看到&lt;code&gt;tetools TAD Jujube_pill ag1&lt;/code&gt; 等价于执行&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/Users/yuanzan/anaconda3/bin/python3 /Users/yuanzan/Documents/golang_programe/tetools/module/TAD/Jujube_pill/current/Jujube_pill/bin/Jujube_pill  ag1&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;所以可以用以上两种方式调用执行程序&lt;/p&gt;
&lt;h1&gt;cotools目录结构&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;.
├── bin                 
│   ├── cotools.ini        #cotools配置文件
│   └── tetools            #cotools主程序
├── html                   #用于网页服务的目录
│   ├── Makefile
│   ├── __pycache__
│   ├── content
│   ├── develop_server.sh
│   ├── fabfile.py
│   ├── output
│   ├── pelicanconf.py
│   ├── publishconf.py
│   └── themes
└── module                 #存放开发人员提交的各类程序
    ├── TAD                #模块名1
    └── compartment        #模块名2
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;程序开发规范&lt;/h1&gt;
&lt;h2&gt;目录及文件&lt;/h2&gt;
&lt;p&gt;开发目录示例如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;.
└── argtest                        #NOT NULL
    └── bin                        #NOT NULL
        ├── argtest -&amp;gt; argtest.py  #NOT NULL
        ├── argtest.ini            #NOT NULL
        ├── argtest.md             #NOT NULL
        ├── argtest.py             #NOT NULL
        └── figure                 #NOT NULL
            └── seqyuan.jpg
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;**提交给tools管理员此目录的绝对路径即可**&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;toolname&lt;/h3&gt;
&lt;p&gt;提交给tools管理员的路径basename即为程序的名称&lt;code&gt;toolname&lt;/code&gt;，此后统称为&lt;code&gt;toolname&lt;/code&gt;，示例中为&lt;code&gt;argtest&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;bin&lt;/h3&gt;
&lt;p&gt;bin目录是固定且必须的&lt;/p&gt;
&lt;h3&gt;主程序&lt;/h3&gt;
&lt;p&gt;bin目录下有主程序，示例中为&lt;code&gt;argtest.py&lt;/code&gt;，此程序命名不做要求&lt;/p&gt;
&lt;h3&gt;主程序链接为&lt;code&gt;toolname&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;示例中bin/argtest为一个软链接文件，链接的是bin下的主程序，链接文件的命名与&lt;code&gt;toolname&lt;/code&gt;的名称相同&lt;/p&gt;
&lt;h3&gt;toolname.ini文件&lt;/h3&gt;
&lt;p&gt;示例中的argtest.ini为必须文件，标准的ini书写格式，命名为&lt;code&gt;toolname&lt;/code&gt; + &lt;code&gt;.ini&lt;/code&gt;，其中内容如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[argtest]               
# section name需命名为`toolname`

interpreter = python3
 # 主程序的解释器，固定的option name，value值可根据主程序作修改，例如主程序为test.r 需要Rscript3.5.1那么这个值请设置为Rscript3.5.1，如果是比较特殊的版本请联系tools管理员添加新的程序解释器路径到tools的配置文件

description = argtest
# 对程序功能的简短描述，用于显示在linux界面

module = TAD
# 主程序所属的分类，可通过空运行tools程序查看已有分类信息，如果没有新提交程序的分类，可以联系cotools管理员进行添加

version = v0.0.1 
# 程序的版本号，以三段式命名版本号。如果对已经提交的程序有任何basename目录内的文件更改，需要更改版本号并提交目录给cotools管理员
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;tool说明文件toolname.md&lt;/h3&gt;
&lt;p&gt;示例中的argtest.md为markdown格式的文件，命名为&lt;code&gt;toolname&lt;/code&gt;+ &lt;code&gt;.md&lt;/code&gt;，与标准markdown不同的是文件中需要有头文件，示例如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Title&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;argtest&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;值为`&lt;/span&gt;&lt;span class="n"&gt;toolname&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;
&lt;span class="n"&gt;Date&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2018&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;日期格式&lt;/span&gt;
&lt;span class="n"&gt;Category&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;TAD&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;值为&lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;

&lt;span class="n"&gt;Tags&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="err"&gt;，&lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;本&lt;/span&gt;&lt;span class="n"&gt;tools的关键词&lt;/span&gt;&lt;span class="err"&gt;，如有多个以逗号隔开，不要多于&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="err"&gt;个&lt;/span&gt;&lt;span class="n"&gt;Tag&lt;/span&gt;

&lt;span class="n"&gt;Slug&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; 
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;此项为空&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;此项为&lt;/span&gt;&lt;span class="n"&gt;url的后缀&lt;/span&gt;&lt;span class="err"&gt;，例如&lt;/span&gt; &lt;span class="mf"&gt;192.168&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;2.202&lt;/span&gt;&lt;span class="sr"&gt;/1900/&lt;/span&gt;&lt;span class="n"&gt;argtest&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;html中的&lt;/span&gt; &lt;span class="n"&gt;argtest&lt;/span&gt;&lt;span class="err"&gt;，如果此项为空默认为&lt;/span&gt;&lt;span class="n"&gt;Title&lt;/span&gt;&lt;span class="err"&gt;，所以&lt;/span&gt;&lt;span class="n"&gt;tools里面的toolsname是不允许有重名的&lt;/span&gt;&lt;span class="err"&gt;，即使相同的&lt;/span&gt;&lt;span class="n"&gt;toolname在不同的module里&lt;/span&gt;&lt;span class="err"&gt;，如果不同&lt;/span&gt;&lt;span class="n"&gt;module里有重名的toolname会导致网页生成有问题&lt;/span&gt;

&lt;span class="n"&gt;Author&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;seqyuan&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;作者，不要写邮箱&lt;/span&gt;

&lt;span class="n"&gt;Summary&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; 
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;摘要，不要多于&lt;/span&gt;&lt;span class="mi"&gt;42&lt;/span&gt;&lt;span class="err"&gt;个字符&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;以下为&lt;code&gt;toolname.md&lt;/code&gt;的正文部分，以标准的markdown格式书写&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; 我们经常以pip install package的形式安装python包，很多新同鞋有这样的疑问：怎样编写python包（自己造轮子）分享给别人，让别人也可以用pip的形式进行安装使用呢？

要解决这个问题我们要从两方面入手：

* 写一个python包
* 规范包的内容上传到PYPI

## 编写一个python包
为了言之有物我们决定编写一个能解决实际应用的包
![seqyuan](./module/TAD/argtest/bin/figure/seqyuan.jpg)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;如果需要在&lt;code&gt;toolname.md&lt;/code&gt;中插入图片，请按照示例中的样式&lt;code&gt;采用相对路径&lt;/code&gt;插入图片，图片要放在&lt;code&gt;toolname/bin/figure&lt;/code&gt;里，标准相对路径格式为：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;./module/模块名/toolname/bin/figure/图片名&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;说明文档必须包涵以下内容：&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;程序的主要功能描述&lt;/li&gt;
&lt;li&gt;程序的使用示例&lt;/li&gt;
&lt;li&gt;程序的参数简介&lt;/li&gt;
&lt;li&gt;程序的参数详解，如果参数是文件，要包含输入文件的具体格式要求&lt;/li&gt;
&lt;li&gt;程序结果的解读，如果是图需要解读，如果是表，需要做表头说明&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;示例请参考：&lt;/code&gt; tetools中的&lt;a href="http://192.168.2.202:1900/gwas_ldheatmap.html" target="_blank"&gt;GWAS_LDheatmap&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;toolname/bin/figure&lt;/h3&gt;
&lt;p&gt;此目录必须存在，即使为空。用于存放&lt;code&gt;toolname.md&lt;/code&gt;中插入的图片&lt;/p&gt;
&lt;h2&gt;tool审核&lt;/h2&gt;
&lt;p&gt;tool审核工作由cotools管理员进行分配审核&lt;/p&gt;
&lt;h1&gt;cotools管理员&lt;/h1&gt;
&lt;h2&gt;添加tool&lt;/h2&gt;
&lt;p&gt;cotools管理员采用 &lt;code&gt;at&lt;/code&gt;参数+&lt;code&gt;开发人员提交的tool路径&lt;/code&gt;
以下命令用于添加tool到cotools
tetools at /abspath/toolname&lt;/p&gt;
&lt;h2&gt;更新tool&lt;/h2&gt;
&lt;p&gt;如果提交的toolname在cotools中已经存在，更新tool的版本需要用到&lt;code&gt;ut&lt;/code&gt;参数
cotools管理员采用 &lt;code&gt;ut&lt;/code&gt;参数+&lt;code&gt;开发人员提交的tool路径&lt;/code&gt;
以下命令用于添加tool到cotools
cotools ut /abspath/toolname&lt;/p&gt;
&lt;h2&gt;添加模块到cotools&lt;/h2&gt;
&lt;p&gt;如果开发人员提供的tool所属模块在cotools中不存在（空运行cotools可查看已有的模块），需要用到&lt;code&gt;am&lt;/code&gt;参数添加新模块到cotools才能使用&lt;code&gt;at&lt;/code&gt;参数添加tool。
示例：&lt;code&gt;cotools am newmodulename moduleDescription&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;添加新的解释器&lt;/h3&gt;
&lt;p&gt;请编辑&lt;code&gt;cotools.ini&lt;/code&gt;文件手动添加
&lt;code&gt;cotools.ini&lt;/code&gt;内容如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[software]&lt;/span&gt;
&lt;span class="na"&gt;python3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;/annoroad/share/software/install/Python-3.3.2/bin/python3&lt;/span&gt;
&lt;span class="na"&gt;perl&lt;/span&gt;    &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;/annoroad/share/software/install/perl-5.16.2/bin/perl&lt;/span&gt;
&lt;span class="na"&gt;make&lt;/span&gt;    &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;/usr/bin/make -f&lt;/span&gt;
&lt;span class="na"&gt;Rscript&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;/annoroad/share/software/install/R-3.2.2/bin/Rscript&lt;/span&gt;

&lt;span class="k"&gt;[module]&lt;/span&gt;
&lt;span class="na"&gt;TAD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;TAD类个性化分析工具&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;删除module&lt;/h2&gt;
&lt;p&gt;请编辑&lt;code&gt;cotools.ini&lt;/code&gt;文件中的&lt;code&gt;module&lt;/code&gt;section自行删除或修改
如要删除整个模块，请手动删除&lt;code&gt;./module/modlueName&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;建立持久网页服务&lt;/h2&gt;
&lt;p&gt;由supertools总管理员进入makeService，然后&lt;code&gt;go build make_serve.go&lt;/code&gt;，最后&lt;code&gt;nohup make_serve &amp;amp;&lt;/code&gt; 就启动了网页服务&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; supertools/makeService
go build make_serve.go
nohup make_serve &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;设置计划任务，定期生成网页&lt;/h2&gt;
&lt;p&gt;运用&lt;code&gt;crontab -e&lt;/code&gt;命令在每周日的晚21点自动执行以下命令,注意&lt;code&gt;*tools&lt;/code&gt;改成自己负责的工具&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;0 21 * * sun cd supertools/*tools/html &amp;amp;&amp;amp; make html
&lt;/pre&gt;&lt;/div&gt;</content><category term="tools"></category><category term="说明"></category></entry><entry><title>怎样预测Hi-C测序数据量</title><link href="jujuba.net/How%20to%20Predict%20Seq%20Data%20about%20Hi-C.html" rel="alternate"></link><published>2018-04-16T00:00:00+08:00</published><updated>2018-04-16T00:00:00+08:00</updated><author><name>seqyuan</name></author><id>tag:None,2018-04-16:jujuba.net/How to Predict Seq Data about Hi-C.html</id><summary type="html"></summary><content type="html">&lt;p&gt;细胞核内的染色质构像一般分以下几个层级&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Chromosome Territories&lt;/li&gt;
&lt;li&gt;Compartment A/B&lt;/li&gt;
&lt;li&gt;Topologically Associating Domains (TADs)&lt;/li&gt;
&lt;li&gt;Local Chromatin Interactions (Loop)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="player all stats" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/images/1.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Engreitz J M. Nature Reviews Molecular Cell Biology， 2016&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;不同层级的染色质构像特征需要由不同分辨率的Hi-C交互矩阵进行对应的算法分析得到。
一般情况下不同层级的染色质构像特征对应的分析分辨如下：&lt;/p&gt;
&lt;p&gt;&lt;img alt="player all stats" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/images/2.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Rivera C M et al. Cell， 2013&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;分辨率越高对应的测序量要求越大，例如第一篇提出了Compartment概念的文章&lt;code&gt;Lieberman-Aiden E et al. science， 2009&lt;/code&gt;，第一篇提出TAD概念的文章&lt;code&gt;Dixon J R et al. Nature， 2012&lt;/code&gt;，测序数据量如下：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Organism Name&lt;/th&gt;
&lt;th&gt;Total Size， Mb&lt;/th&gt;
&lt;th&gt;Total Spots&lt;/th&gt;
&lt;th&gt;Total Bases&lt;/th&gt;
&lt;th&gt;Library Name&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Homo sapiens&lt;/td&gt;
&lt;td&gt;1，613&lt;/td&gt;
&lt;td&gt;18，145，940&lt;/td&gt;
&lt;td&gt;2，758，182，880&lt;/td&gt;
&lt;td&gt;Hi-C (HindIII，K562，1) 8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Homo sapiens&lt;/td&gt;
&lt;td&gt;1，929&lt;/td&gt;
&lt;td&gt;18，677，569&lt;/td&gt;
&lt;td&gt;2，838，990，488&lt;/td&gt;
&lt;td&gt;Hi-C (HindIII，K562，1) 7&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Homo sapiens&lt;/td&gt;
&lt;td&gt;1，586&lt;/td&gt;
&lt;td&gt;15，132，243&lt;/td&gt;
&lt;td&gt;2，300，100，936&lt;/td&gt;
&lt;td&gt;Hi-C (NcoI，GM，1) 2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Homo sapiens&lt;/td&gt;
&lt;td&gt;1，406&lt;/td&gt;
&lt;td&gt;13，527，036&lt;/td&gt;
&lt;td&gt;2，056，109，472&lt;/td&gt;
&lt;td&gt;Hi-C (NcoI，GM，1) 1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Homo sapiens&lt;/td&gt;
&lt;td&gt;869&lt;/td&gt;
&lt;td&gt;8，607，443&lt;/td&gt;
&lt;td&gt;1，308，331，336&lt;/td&gt;
&lt;td&gt;Hi-C (HindIII，GM，2) 3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Homo sapiens&lt;/td&gt;
&lt;td&gt;783&lt;/td&gt;
&lt;td&gt;7，889，352&lt;/td&gt;
&lt;td&gt;1，199，181，504&lt;/td&gt;
&lt;td&gt;Hi-C (HindIII，GM，2) 2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Homo sapiens&lt;/td&gt;
&lt;td&gt;713&lt;/td&gt;
&lt;td&gt;7，068，675&lt;/td&gt;
&lt;td&gt;1，074，438，600&lt;/td&gt;
&lt;td&gt;Hi-C (HindIII，GM，Biological Repeat)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Homo sapiens&lt;/td&gt;
&lt;td&gt;622&lt;/td&gt;
&lt;td&gt;6，443，641&lt;/td&gt;
&lt;td&gt;979，433，432&lt;/td&gt;
&lt;td&gt;Hi-C (HindIII，GM，1)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Homo sapiens&lt;/td&gt;
&lt;td&gt;9，939&lt;/td&gt;
&lt;td&gt;259，123，992&lt;/td&gt;
&lt;td&gt;18，656，927，424&lt;/td&gt;
&lt;td&gt;GSM892307: RenLab-HiC-IMR90， replicate two&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Homo sapiens&lt;/td&gt;
&lt;td&gt;21，572&lt;/td&gt;
&lt;td&gt;496，522，946&lt;/td&gt;
&lt;td&gt;35，749，652，112&lt;/td&gt;
&lt;td&gt;GSM892306: RenLab-HiC-hESC， replicate two&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Mus musculus&lt;/td&gt;
&lt;td&gt;12，430&lt;/td&gt;
&lt;td&gt;294，763，499&lt;/td&gt;
&lt;td&gt;21，222，971，928&lt;/td&gt;
&lt;td&gt;GSM892305: RenLab-HiC-cortex， replicate two&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Mus musculus&lt;/td&gt;
&lt;td&gt;16，295&lt;/td&gt;
&lt;td&gt;401，291，092&lt;/td&gt;
&lt;td&gt;28，892，958，624&lt;/td&gt;
&lt;td&gt;GSM892304: RenLab-HiC-cortex， replicate one&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Homo sapiens&lt;/td&gt;
&lt;td&gt;16，479&lt;/td&gt;
&lt;td&gt;397，194，480&lt;/td&gt;
&lt;td&gt;28，598，002，560&lt;/td&gt;
&lt;td&gt;GSM862724: RenLab-HiC-IMR90&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Homo sapiens&lt;/td&gt;
&lt;td&gt;11，737&lt;/td&gt;
&lt;td&gt;237，662，270&lt;/td&gt;
&lt;td&gt;23，702，833，392&lt;/td&gt;
&lt;td&gt;GSM862723: RenLab-HiC-hESC&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Mus musculus&lt;/td&gt;
&lt;td&gt;18，029&lt;/td&gt;
&lt;td&gt;425，506，797&lt;/td&gt;
&lt;td&gt;30，636，489，384&lt;/td&gt;
&lt;td&gt;GSM862722: RenLab-HiC-mESC-NCoI&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Mus musculus&lt;/td&gt;
&lt;td&gt;13，243&lt;/td&gt;
&lt;td&gt;340，651，343&lt;/td&gt;
&lt;td&gt;24，526，896，696&lt;/td&gt;
&lt;td&gt;GSM862721: RenLab-HiC-mESC-HindIII， replicate two&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Mus musculus&lt;/td&gt;
&lt;td&gt;26，828&lt;/td&gt;
&lt;td&gt;465，473，330&lt;/td&gt;
&lt;td&gt;42，892，374，448&lt;/td&gt;
&lt;td&gt;GSM862720: RenLab-HiC-mESC-HindIII， replicate one&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;第一篇分辨率测到kb级别得文章&lt;code&gt;Rao S S P et al. Cell， 2014&lt;/code&gt;，为了达到kb别分辨率，对GM12878 B-lymphoblastoid细胞单个样本测序量达4.9 billion pairwise reads。随着要达到的Hi-C交互矩阵分辨率的提升，需要的测序量是以指数形式递增的。如果研究者的需求只要达到TAD级别就够的话，Hi-C交互矩阵能够达到40k的分辨率就行了没有必要达到更高的分辨率，但是对于特定分辨率的Hi-C需求，怎样合理预估测序量呢?&lt;/p&gt;
&lt;p&gt;要做到合理预估测序量我们需要对分辨率的概念进行明确。&lt;/p&gt;
&lt;h2&gt;分辨率概念&lt;/h2&gt;
&lt;p&gt;有两篇三维基因组内奠基性的文章分别给出了关于分辨率的定义：&lt;/p&gt;
&lt;h3&gt;第一种定义&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;Belton J M et al. Methods， 2012&lt;/code&gt;这篇文章第一次提出了分辨率明确定义：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;对于一定测序量的Hi-C数据，把最终质控得到的unique valid pair　reads　map 到不同的分辨率矩阵，如果矩阵80%以上的bin pair至少有１对交互reads，那么就说这些测序数据达到了这个矩阵的分辨率。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img alt="player all stats" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/images/3.png"&gt;&lt;/p&gt;
&lt;h3&gt;第二种定义&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;Rao S S P et al. Cell， 2014&lt;/code&gt;这篇文章达到了950bp的分辨率，它的定义是这样的：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;对于一定测序量的Hi-C数据来说，对基因组按特定的窗口(bin)大小进行划分(例如1kb)，如果最终80%以上的bin都至少有1000条unique valid reads覆盖，那么就说这些测序数据达到了这个bin size的分辨率。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;我们可以把特定的测序数据做成不同分辨率的矩阵，矩阵分辨率越高，相应的矩阵也就越稀疏(不饱和)，以上两种定义本质上其实都是一样的，都是在以特定数据达到的矩阵的饱和度进行定义，第一种定义更加直接，第二种定义在操作上更好计算一些，类似于测序深度的概念，这个测序深度不同于重测序中的单碱基的测序深度，而是特定窗口(bin)的测序深度(落在bin里的测序reads数)。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;我们预测特定分辨率的Hi-C数据测序量以上述第二种分辨率的定义为基础，但是要对具体参数稍微做一下修改：80%以上的bin至少覆盖度的unique valid reads数&lt;code&gt;1000&lt;/code&gt;需要做一些讨论和修改。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;80%以上的bin至少覆盖度的unique  valid reads达到多少合适?&lt;/h3&gt;
&lt;p&gt;文章给出的答案是1000，但是这个1000具体是怎么来的呢?这个1000真的合适吗?&lt;/p&gt;
&lt;p&gt;一个可接受的Hi-C交互矩阵热图一般是这样的：&lt;/p&gt;
&lt;p&gt;&lt;img alt="player all stats" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/images/5.png"&gt;&lt;/p&gt;
&lt;p&gt;这个矩阵的主要特点是距离近的基因组位点之间的交互数值一般比距离远的位点间的交互数值要高(测得的Hi-C unique  valid reads多)，一般由IDEs(Interaction decay exponents)来描述这种随距离的增大交互数值衰减的程度。&lt;/p&gt;
&lt;p&gt;&lt;img alt="player all stats" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/images/6.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Lieberman-Aiden E et al. science， 2009&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;大多数物种的Hi-C交互矩阵的IDE都和距离幂次线性相关，如下图：&lt;/p&gt;
&lt;p&gt;&lt;img alt="player all stats" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/images/4.png"&gt;&lt;/p&gt;
&lt;p&gt;那么对于某一个特定的bin X来说，与X不同距离的各bin与X的交互也会遵循这个IDE的规律，要满足这个规律那么X所测得的unique valid reads(深度)至少要有一个最低值(通过IDE的斜率+截距累积计算)。根据我们的经验不同物种不同分辨率矩阵的这个IDE的斜率多少有些差异，算出来的X的最低深度大概在1000-4000之间比较合适。&lt;/p&gt;
&lt;h3&gt;影响预测数据量的数据质控参数&lt;/h3&gt;
&lt;p&gt;前面我们确定了80%以上的bin至少覆盖度unique valid reads在1000-4000之间比较合适，但是bin的总数以及raw reads到unique valid reads的数据质控损耗比例就需要确定了。&lt;/p&gt;
&lt;p&gt;bin的总数可以由基因组大小除以要达到的分辨率大小确定。影响unique valid reads最终有效比例的因素包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Celan Reads的比例&lt;/li&gt;
&lt;li&gt;比对到基因组的Unique Mapped Ratio&lt;/li&gt;
&lt;li&gt;Interaction Rate&lt;/li&gt;
&lt;li&gt;Interaction Reads的Pcr dup Ratio&lt;/li&gt;
&lt;li&gt;Cis Ratio&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;结合以上各因素的经验值我们就能预测最终需要测序的Raw data多少了，还可以根据每个Hi-C文库一般的数据产出确定要建几个Hi-C文库。&lt;/p&gt;</content><category term="Hi-C， 分辨率"></category></entry><entry><title>绘制NBA球员投篮出手位置图</title><link href="jujuba.net/How%20to%20Create%20NBA%20Shotlog%20in%20Python.html" rel="alternate"></link><published>2018-02-23T00:00:00+08:00</published><updated>2018-02-23T00:00:00+08:00</updated><author><name>seqyuan</name></author><id>tag:None,2018-02-23:jujuba.net/How to Create NBA Shotlog in Python.html</id><summary type="html"></summary><content type="html">&lt;p&gt;很多篮球迷对NBA球员的习惯出手位置感兴趣，想要得到如下的这种图：&lt;/p&gt;
&lt;p&gt;&lt;a href="http://www.austinclemens.com/shotcharts/"&gt;&lt;img alt="shotlog example" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/NBAshotlog/Antetokounmpo_shotlog.png" title=""&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;经搜索发现网上已有相关资源，基本都来源于&lt;a href="http://savvastjortjoglou.com/nba-shot-sharts.html"&gt;How to Create NBA Shot Charts in Python&lt;/a&gt;，但是现在按照这些教程都不能重现。&lt;/p&gt;
&lt;p&gt;本文将介绍怎样具体可操作的用python的matplotlib包实现绘制NBA球员投篮出手位置图。&lt;/p&gt;
&lt;h3&gt;要做到这件事主要是解决两个大问题:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;NBA球员的投篮数据从哪里获得 (大多网上已有资源卡在了这里)&lt;/li&gt;
&lt;li&gt;怎么样绘制到图表&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;我们将练习到如下知识:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;怎么样通过网页分析获取数据API&lt;/li&gt;
&lt;li&gt;获取网页数据的基础方式&lt;/li&gt;
&lt;li&gt;绘制篮球半场图&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;第一部分--获取球员投篮位置数据&lt;/h1&gt;
&lt;p&gt;NBA官方并没有提供公共的API方便我们访问球员的shot log, &lt;a href="http://www.gregreda.com/2015/02/15/web-scraping-finding-the-api/"&gt;Web Scraping 201: finding the API&lt;/a&gt;这篇文章为我们提供了分析网页寻找数据API的方法，我们要分析NBA球员shot log可拆解成以下步骤：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;锁定目标网站(哪个网站有NBA球员shot log数据)&lt;/li&gt;
&lt;li&gt;具体网页对象(具体哪个网页有shot log数据)&lt;/li&gt;
&lt;li&gt;分析shot log API&lt;/li&gt;
&lt;li&gt;通过API获取感兴趣球员的shot log数据&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;1.&lt;strong&gt;锁定目标网站&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;目标网站：&lt;a href="http://stats.nba.com"&gt;stats.nba.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;2.&lt;strong&gt;具体网页对象&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;shot log所在的页面标签可能会有改变，有时不在很显眼的位置，这也是很多教程失效的原因(只给了最后API的网址，没有说这个网址是怎么来的)，所以这个得花时间找一下。&lt;/p&gt;
&lt;p&gt;首先打开目标网站&lt;a href="http://stats.nba.com"&gt;stats.nba.com&lt;/a&gt;，按下图所示依次点击&lt;code&gt;Player&lt;/code&gt;，&lt;code&gt;See All Stats&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://stats.nba.com"&gt;&lt;img alt="player all stats" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/NBAshotlog/player_all_stats.png" title=""&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;按照图中1、2顺序点击后会得到以下页面&lt;/p&gt;
&lt;p&gt;&lt;a href="https://stats.nba.com/leaders/"&gt;&lt;img alt="leaders" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/NBAshotlog/leaders.png" title=""&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;页面表格是每个NBA球员的数据，表头都是简写，通过图示点击&lt;code&gt;GLOSSARY&lt;/code&gt;我们得到表头详细信息，其中&lt;code&gt;FGA-Field Goals Attempted&lt;/code&gt;表示尝试投篮的位置，表格中每个球员的&lt;code&gt;FGA&lt;/code&gt;列的数字都是可点击的，我们按上图所示点击&lt;code&gt;James Harden&lt;/code&gt;的&lt;code&gt;FGA&lt;/code&gt;列数字，跳转的结果是显示了&lt;code&gt;James Harden&lt;/code&gt;2017-18常规赛的&lt;code&gt;Hex Hap&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Hex Map" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/NBAshotlog/hex_map.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Shot Plot&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Shot Plot" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/NBAshotlog/shot_plot.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Shot Zones&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Shot Zones" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/NBAshotlog/shot_zones.png"&gt;&lt;/p&gt;
&lt;p&gt;好了，可以结束了...&lt;/p&gt;
&lt;p&gt;等等，我们的目的不是简单得到&lt;code&gt;Shot Plot&lt;/code&gt;，而是要练习一些知识，所以，继续&lt;/p&gt;
&lt;p&gt;点击&lt;code&gt;James Harden&lt;/code&gt;的&lt;code&gt;FGA&lt;/code&gt;数据，跳转后的页面除了以上3个图还包括以下这个表格&lt;/p&gt;
&lt;p&gt;&lt;img alt="Harden Shot" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/NBAshotlog/harden_shot.png"&gt;&lt;/p&gt;
&lt;p&gt;这个表格的内容结合&lt;code&gt;Shot Plot&lt;/code&gt;的图，可以确定，要找的&lt;code&gt;具体网页对象&lt;/code&gt;应该是这个页面了，但是表格中并没有直接给出投篮位置信息，这个网页访问的API应该包括这些信息，所以我们进入下面的步骤&lt;/p&gt;
&lt;p&gt;3.&lt;strong&gt;分析shot log API&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;我们以Chrome浏览器为例，在上一步找到的&lt;code&gt;具体网页对象&lt;/code&gt;页面打开浏览器的开发者选项(更多工具-&amp;gt;开发者工具)，然后按F5键，刷新页面，你将得到如下页面&lt;/p&gt;
&lt;p&gt;&lt;img alt="shot log API" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/NBAshotlog/API.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="request url" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/NBAshotlog/request_url.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="request headers" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/NBAshotlog/headers.png"&gt;&lt;/p&gt;
&lt;p&gt;我们按上图红色数字标注，依次点击，选择&lt;code&gt;Network&lt;/code&gt;，然后点击&lt;code&gt;XHR&lt;/code&gt;进行过滤，&lt;code&gt;XHR&lt;/code&gt;是&lt;a href="https://en.wikipedia.org/wiki/XMLHttpRequest"&gt;XMLHttpRequest&lt;/a&gt;的简写 - 这是一种用来获取XML或JSON数据的请求类型。经&lt;code&gt;XHR&lt;/code&gt;筛选后表格中的有几个条目，红色数字标注为3的既是我们将要查找的shot log API，&lt;code&gt;Preview&lt;/code&gt;标签中包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;resource - 请求的名称 shotchartdetail。&lt;/li&gt;
&lt;li&gt;parameters - 请求参数，提交给API的请求参数，我们可以理解成SQL语言的条件语句，例如赛季、球员ID等等，我们改变URL中的参数就能得到不同的数据&lt;/li&gt;
&lt;li&gt;resultSets - 请求得到的数据集，包含两个表格。仔细看表头（headers）第一个表格包含我们想要的shot log信息（LOC_X，LOC_Y）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;与&lt;code&gt;Preview&lt;/code&gt;并列的&lt;code&gt;Headers&lt;/code&gt;标签包含：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Request URL - API URL&lt;/li&gt;
&lt;li&gt;Requset Headers - 请的表头，用程序爬取网页请求数据时会用到&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;通过API获取感兴趣球员的shot log数据&lt;/p&gt;
&lt;p&gt;4.&lt;strong&gt;通过API获取感兴趣球员的shot log数据&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;上一步得到了&lt;code&gt;James Harden&lt;/code&gt;shot log的Request URL和Requset Headers，下面我们要做的是通过python代码获取shot log数据，以下是代码&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;requests&lt;/span&gt;
    &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;

    &lt;span class="n"&gt;shot_chart_url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://stats.nba.com/stats/shotchartdetail?AheadBehind=&amp;amp;&amp;#39;&lt;/span&gt;\
                     &lt;span class="s1"&gt;&amp;#39;CFID=&amp;amp;CFPARAMS=&amp;amp;ClutchTime=&amp;amp;Conference=&amp;amp;ContextFilter=&amp;amp;ContextMeasure=FGA&amp;#39;&lt;/span&gt;\
                     &lt;span class="s1"&gt;&amp;#39;&amp;amp;DateFrom=&amp;amp;DateTo=&amp;amp;Division=&amp;amp;EndPeriod=10&amp;amp;EndRange=28800&amp;amp;GROUP_ID=&amp;amp;GameEventID=&amp;#39;&lt;/span&gt;\
                     &lt;span class="s1"&gt;&amp;#39;&amp;amp;GameID=&amp;amp;GameSegment=&amp;amp;GroupID=&amp;amp;GroupMode=&amp;amp;GroupQuantity=5&amp;amp;LastNGames=0&amp;amp;LeagueID=00&amp;#39;&lt;/span&gt;\
                     &lt;span class="s1"&gt;&amp;#39;&amp;amp;Location=&amp;amp;Month=0&amp;amp;OnOff=&amp;amp;OpponentTeamID=0&amp;amp;Outcome=&amp;amp;PORound=0&amp;amp;Period=0&amp;amp;PlayerID={PlayerID}&amp;#39;&lt;/span&gt;\
                     &lt;span class="s1"&gt;&amp;#39;&amp;amp;PlayerID1=&amp;amp;PlayerID2=&amp;amp;PlayerID3=&amp;amp;PlayerID4=&amp;amp;PlayerID5=&amp;amp;PlayerPosition=&amp;amp;PointDiff=&amp;amp;Position=&amp;#39;&lt;/span&gt;\
                     &lt;span class="s1"&gt;&amp;#39;&amp;amp;RangeType=0&amp;amp;RookieYear=&amp;amp;Season={Season}&amp;amp;SeasonSegment=&amp;amp;SeasonType={SeasonType}&amp;#39;&lt;/span&gt;\
                     &lt;span class="s1"&gt;&amp;#39;&amp;amp;ShotClockRange=&amp;amp;StartPeriod=1&amp;amp;StartRange=0&amp;amp;StarterBench=&amp;amp;TeamID=0&amp;amp;VsConference=&amp;#39;&lt;/span&gt;\
                     &lt;span class="s1"&gt;&amp;#39;&amp;amp;VsDivision=&amp;amp;VsPlayerID1=&amp;amp;VsPlayerID2=&amp;amp;VsPlayerID3=&amp;amp;VsPlayerID4=&amp;amp;VsPlayerID5=&amp;#39;&lt;/span&gt;\
                     &lt;span class="s1"&gt;&amp;#39;&amp;amp;VsTeamID=&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PlayerID&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;201935&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Season&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;2017-18&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;SeasonType&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Regular+Season&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="n"&gt;header&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;User-Agent&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko)&amp;#39;&lt;/span&gt;\
                              &lt;span class="s1"&gt;&amp;#39; Chrome/62.0.3202.94 Safari/537.36&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;shot_chart_url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;header&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# headers是模拟浏览器访问行为，现在没有这一项获取不到数据&lt;/span&gt;

    &lt;span class="n"&gt;headers&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="p"&gt;()[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;resultSets&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;headers&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;shots&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="p"&gt;()[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;resultSets&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;rowSet&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;shot_df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DataFrame&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;shots&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;columns&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# View the head of the DataFrame and all its columns&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;IPython.display&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;display&lt;/span&gt;
    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;option_context&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;display.max_columns&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;display&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;shot_df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
    &lt;span class="c1"&gt;# Or &lt;/span&gt;
    &lt;span class="c1"&gt;#shot_df.head().to_excel(&amp;#39;outfile.xls&amp;#39;,index=True,header=True)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;我们得到的pandas DataFrame:&lt;code&gt;shot_df&lt;/code&gt;，表头及前3行数据展示如下：&lt;/p&gt;
&lt;p&gt;&lt;img alt="harden_shotlog_charts" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/NBAshotlog/harden_shotlog_charts.png"&gt;&lt;/p&gt;
&lt;p&gt;shot_chart_url其中PlayerID、Season、SeasonType三项是可变参数，如果想获得其他球员的PlayerID可以登录&lt;a href="http://www.nba.com/players/"&gt;nba.com/players&lt;/a&gt;搜索感兴趣球员的名字，如下&lt;/p&gt;
&lt;p&gt;&lt;img alt="player" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/NBAshotlog/player.png"&gt;&lt;/p&gt;
&lt;p&gt;点击搜索结果，跳转到页面的网址最后一项既是PlayerID，例如：&lt;code&gt;http://www.nba.com/players/giannis/antetokounmpo/203507&lt;/code&gt;中的&lt;code&gt;203507&lt;/code&gt;即是字母哥的PlayerID。&lt;/p&gt;
&lt;p&gt;我们这一步得到的&lt;code&gt;shot_df&lt;/code&gt;包含了James Harden在2017-18赛季常规赛目前为止（20180219全明星赛）所有投篮尝试。我们需要的数据为&lt;code&gt;LOC_X&lt;/code&gt;和&lt;code&gt;LOC_Y&lt;/code&gt;两列，这些是每次投篮尝试的坐标值，然后可以将这些坐标值绘制到代表篮球场的坐标轴上，当然我们可能还需要&lt;code&gt;EVENT_TYPE&lt;/code&gt;列，来区分投篮是否投进。&lt;/p&gt;
&lt;h1&gt;第二部分--绘制球员shot log到球场图&lt;/h1&gt;
&lt;p&gt;关于这一部分，&lt;a href="http://savvastjortjoglou.com/nba-shot-sharts.html"&gt;How to Create NBA Shot Charts in Python&lt;/a&gt;已经做了非常优秀的工作，我们会延续其框架，并对代码做少许修改以达到更好的适用性。&lt;/p&gt;
&lt;p&gt;首先我们对上一步得到的James Harden的shot log &lt;code&gt;LOC_X&lt;/code&gt;和&lt;code&gt;LOC_Y&lt;/code&gt;进行快速绘图，看其X、Y是怎么定义的。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;

&lt;span class="n"&gt;fig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;4.3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_subplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;scatter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;shot_df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LOC_X&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;shot_df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LOC_Y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="quickly plot" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/NBAshotlog/quickly_plot.png"&gt;&lt;/p&gt;
&lt;p&gt;通过快速预览图我们对&lt;code&gt;LOC_X&lt;/code&gt;和&lt;code&gt;LOC_Y&lt;/code&gt;有了一个大概的认识，有一点需要注意：&lt;code&gt;LOC_X&lt;/code&gt;其实是观众视野从中场面向篮筐来说的，&lt;code&gt;LOC_X&lt;/code&gt;是正值则在篮筐的左边。所以最终绘图时需要按以下代码做调整，我们以shot log中Right Side(R) 投篮区域(投篮区域划分请参考前文&lt;code&gt;Shot Zones&lt;/code&gt;图)的出手作为示例说明。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;right_shot_df = shot_df[shot_df.SHOT_ZONE_AREA == &amp;quot;Right Side(R)&amp;quot;]
other_shot_df = shot_df[~(shot_df.SHOT_ZONE_AREA == &amp;quot;Right Side(R)&amp;quot;)]

fig = plt.figure(figsize=(4.3,4))
ax = fig.add_subplot(111)
ax.scatter(right_shot_df.LOC_X, right_shot_df.LOC_Y, s=1, c=&amp;#39;red&amp;#39;, label=&amp;#39;Right Side(R)&amp;#39;)
ax.scatter(other_shot_df.LOC_X, other_shot_df.LOC_Y, s=1, c=&amp;#39;blue&amp;#39;, label=&amp;#39;Other AREA&amp;#39;)
ax.set_ylim(top=-50,bottom=580)
ax.legend()
plt.show()
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="right side" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/NBAshotlog/right_side.png"&gt;&lt;/p&gt;
&lt;h2&gt;画篮球半场图&lt;/h2&gt;
&lt;p&gt;通过对&lt;code&gt;LOC_X&lt;/code&gt;和&lt;code&gt;LOC_Y&lt;/code&gt;数据的快速画图，我们大概知道了篮筐的位置大概就是&lt;code&gt;LOC_X&lt;/code&gt;和&lt;code&gt;LOC_Y&lt;/code&gt;的原点。知道了这一点，我们结合篮球半场的具体&lt;a href="court_size.gif"&gt;尺寸&lt;/a&gt; (&lt;a href="https://www.sportsknowhow.com/basketball/dimensions/nba-basketball-court-dimensions.html"&gt;下图&lt;/a&gt;)和比例就可以画出篮球半场图了。&lt;/p&gt;
&lt;p&gt;&lt;a href="http://www.sportscourtdimensions.com/wp-content/uploads/2015/02/nba_court_dimensions_h.png"&gt;&lt;img alt="nba_court_dimensions_h" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/NBAshotlog/nba_court_dimensions_h.png" title=""&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;通过上图我们知道了篮球场宽度是&lt;code&gt;50FT&lt;/code&gt;，转换成&lt;code&gt;INCH&lt;/code&gt;是&lt;code&gt;600IN&lt;/code&gt;，篮球场长&lt;code&gt;94FT&lt;/code&gt;，转换成&lt;code&gt;INCH&lt;/code&gt;是&lt;code&gt;1128IN&lt;/code&gt;，再结合我们上一步画出的投篮点快速预览图，通过对很多球员的&lt;code&gt;LOC_Y&lt;/code&gt;为0时，&lt;code&gt;LOC_X&lt;/code&gt;与&lt;code&gt;SHOT_DISTANCE&lt;/code&gt;，我们能够推测出&lt;code&gt;LOC_X&lt;/code&gt;和&lt;code&gt;LOC_Y&lt;/code&gt;的单位与&lt;code&gt;IN&lt;/code&gt;的换算大概为10/12。&lt;/p&gt;
&lt;p&gt;画图函数如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.patches&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Arc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Wedge&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;data_linewidth_plot&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;ax&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gca&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lw_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;linewidth&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lw&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="c1"&gt;#self.ax.figure.canvas.draw()&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ppd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;72.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dpi&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;trans&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;transData&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;transform&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_resize&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;_resize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;lw&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;trans&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lw_data&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;trans&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ppd&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lw&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;lw&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;draw_half_court&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;lw&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="c1"&gt;#line width&lt;/span&gt;
    &lt;span class="n"&gt;color&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;k&amp;#39;&lt;/span&gt;
    &lt;span class="c1"&gt;# 精确line width&lt;/span&gt;
    &lt;span class="n"&gt;court_lw&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data_linewidth_plot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;linewidth&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;lw&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lw&lt;/span&gt;

    &lt;span class="c1"&gt;## Create the basketball hoop&lt;/span&gt;
    &lt;span class="c1"&gt;#篮筐直径(内径)是18IN.,我们设置半径为9.2IN刨除line width 0.2IN,正好为篮筐半径&lt;/span&gt;
    &lt;span class="n"&gt;hoop&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Wedge&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mf"&gt;9.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;360&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mf"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#767676&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;hoop_neck&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt; &lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linewidth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#767676&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;## Create backboard&lt;/span&gt;
    &lt;span class="c1"&gt;#Rectangle, left lower at xy = (x, y) with specified width, height and rotation angle&lt;/span&gt;
    &lt;span class="n"&gt;backboard&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;36&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt; &lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;72&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linewidth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#767676&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# List of the court elements to be plotted onto the axes&lt;/span&gt;

    &lt;span class="c1"&gt;## Restricted Zone, it is an arc with 4ft radius from center of the hoop &lt;/span&gt;
    &lt;span class="n"&gt;restricted&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Arc&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;96&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;96&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;theta1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;theta2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;180&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;linewidth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#767676&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fill&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;restricted_left&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;48&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt; &lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linewidth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#767676&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;restricted_right&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;48&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt; &lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linewidth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;#767676&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# Create free throw top arc  罚球线弧顶&lt;/span&gt;
    &lt;span class="n"&gt;top_arc_diameter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;court_lw&lt;/span&gt;
    &lt;span class="n"&gt;top_free_throw&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Arc&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;164&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;top_arc_diameter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;top_arc_diameter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;theta1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;theta2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;180&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;linewidth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fill&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# Create free throw bottom arc 罚球底弧&lt;/span&gt;
    &lt;span class="n"&gt;bottom_free_throw&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Arc&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;164&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;top_arc_diameter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;top_arc_diameter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;theta1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;180&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;theta2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;linewidth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;abs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linestyle&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;dashed&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fill&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# Create the outer box 0f the paint, width=16ft outside , height=18ft 10in&lt;/span&gt;
    &lt;span class="n"&gt;outer_box&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;96&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;63&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;192&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;230&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linewidth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fill&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# Create the inner box of the paint, widt=12ft, height=height=18ft 10in&lt;/span&gt;
    &lt;span class="n"&gt;inner_box&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;72&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;63&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;144&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;230&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linewidth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fill&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;## Three point line&lt;/span&gt;
    &lt;span class="c1"&gt;# Create the side 3pt lines, they are 14ft long before they begin to arc&lt;/span&gt;
    &lt;span class="n"&gt;corner_three_left&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;264&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;63&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linewidth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;corner_three_right&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;264&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;63&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linewidth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# 3pt arc - center of arc will be the hoop, arc is 23&amp;#39;9&amp;quot; away from hoop&lt;/span&gt;
    &lt;span class="c1"&gt;# I just played around with the theta values until they lined up with the &lt;/span&gt;
    &lt;span class="c1"&gt;# threes &lt;/span&gt;
    &lt;span class="n"&gt;three_diameter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;court_lw&lt;/span&gt;
    &lt;span class="n"&gt;three_arc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Arc&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;three_diameter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;three_diameter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;theta1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;21.9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;theta2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;158&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linewidth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# Center Court&lt;/span&gt;
    &lt;span class="n"&gt;center_outer_arc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Arc&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;94&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;63&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;48&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;48&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;theta1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;180&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;theta2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;linewidth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;center_inner_arc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Arc&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;94&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;63&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;144&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;144&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;theta1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;180&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;theta2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;linewidth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# Draw the half court line, baseline and side out bound lines&lt;/span&gt;
    &lt;span class="n"&gt;outer_lines&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;25&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;63&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;94&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;unit&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linewidth&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;court_lw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fill&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;#2 IN. WIDE BY 3 FT. DEEP, 28 FT. INSIDE, 3FT. extenf onto court&lt;/span&gt;

    &lt;span class="n"&gt;court_elements&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;hoop_neck&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;backboard&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;restricted&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;restricted_left&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;restricted_right&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;top_free_throw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;bottom_free_throw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="n"&gt;outer_box&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;inner_box&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;corner_three_left&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;corner_three_right&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;three_arc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;center_outer_arc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;center_inner_arc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;outer_lines&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="c1"&gt;# Add the court elements onto the axes&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;element&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;court_elements&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_patch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;画图：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;fig = plt.figure(figsize=(9,9))
ax = fig.add_subplot(111,aspect=&amp;#39;equal&amp;#39;)
ax.set_xlim(-330,330)
ax.set_ylim(-200,600)

draw_half_court(ax=ax)

plt.show()
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="court" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/NBAshotlog/court.png"&gt;&lt;/p&gt;
&lt;p&gt;添加上投篮数据&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;fig = plt.figure(figsize=(9,8))
ax = fig.add_subplot(111,aspect=&amp;#39;equal&amp;#39;)
ax.set_xlim(-330,330)
ax.set_ylim(top= -100,bottom = 500)

draw_half_court(ax=ax,unit=10/12)

df_missed = shot_df[shot_df.EVENT_TYPE==&amp;#39;Missed Shot&amp;#39;][[&amp;#39;LOC_X&amp;#39;,&amp;#39;LOC_Y&amp;#39;]]
ax.scatter(df_missed.LOC_X, df_missed.LOC_Y,s=2,color=&amp;#39;r&amp;#39;,label = &amp;#39;Missed Shot&amp;#39;,alpha=0.5)
df_made = shot_df[shot_df.EVENT_TYPE==&amp;#39;Made Shot&amp;#39;][[&amp;#39;LOC_X&amp;#39;,&amp;#39;LOC_Y&amp;#39;]]
ax.scatter(df_made.LOC_X, df_made.LOC_Y,s=2,color=&amp;#39;b&amp;#39;,label = &amp;#39;Made Shot&amp;#39;,alpha=0.5)

legend = ax.legend(bbox_to_anchor=(0.49, 0.13), loc=2, borderaxespad=0.,prop={&amp;#39;size&amp;#39;:8},ncol=2,frameon=False)
plt.axis(&amp;#39;off&amp;#39;)

FG = &amp;quot;%.1f&amp;quot; % ((df_made.shape[0]/shot_df.shape[0])*100)
ax.text(-250,440,&amp;#39;FG%:{0}%({1}-{2})&amp;#39;.format(FG,df_made.shape[0],shot_df.shape[0]), fontsize=8)
ax.text(-250,-63,&amp;#39;FGA for Harden, James during the 2017-18 Regular Season&amp;#39;.format(FG,df_made.shape[0],shot_df.shape[0]), fontsize=8)

plt.show()
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="court_shotlog" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/NBAshotlog/court_shotlog.png"&gt;&lt;/p&gt;</content><category term="matplotlib"></category><category term="NBA"></category></entry><entry><title>授人以渔-购买VPS搭建ssr科学上网</title><link href="jujuba.net/vps%20shadowsocksr.html" rel="alternate"></link><published>2017-12-01T00:00:00+08:00</published><updated>2017-12-01T00:00:00+08:00</updated><author><name>seqyuan</name></author><id>tag:None,2017-12-01:jujuba.net/vps shadowsocksr.html</id><summary type="html">&lt;p&gt;购买VPS服务器,搭建ssr科学上网&lt;/p&gt;</summary><content type="html">&lt;h2&gt;自建ssr科学上网教程整体分三步：&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;第一步：购买VPS服务器&lt;/li&gt;
&lt;li&gt;第二步：部署VPS服务器&lt;/li&gt;
&lt;li&gt;第三步：下载配置ShadowsocksR科学上网&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;===第一步：购买VPS服务器===&lt;/h3&gt;
&lt;p&gt;VPS服务器需要选择国外的，我选择的是“搬瓦工”，速度、稳定性易用性都不错。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;搬瓦工注册地址：https://bwh1.net/&lt;/li&gt;
&lt;li&gt;注册后选择一个适合自己的配置（最便宜的），点进去购买。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;1 选择最便宜的&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N1.jpg"&gt;&lt;/p&gt;
&lt;h3&gt;2 点击红色箭头所示位置&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N2.jpg"&gt;&lt;/p&gt;
&lt;h3&gt;3 选择套餐（建议先选择一个月的试试）&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N3.jpg"&gt;  &lt;/p&gt;
&lt;h3&gt;4 选择一个机房&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N4.jpg"&gt;  &lt;/p&gt;
&lt;h3&gt;5 加入到购物车（单击最下方的 add to cart）&lt;/h3&gt;
&lt;h3&gt;6 Checkout&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N5.jpg"&gt;  &lt;/p&gt;
&lt;h3&gt;7 检查信息，选择付款方式（Alipay）&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N6.jpg"&gt; &lt;/p&gt;
&lt;h3&gt;8 Pay now&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N7.png"&gt;&lt;/p&gt;
&lt;h3&gt;9 打开手机支付宝，扫码支付（已自动转换汇率）。为防止你不小心为我的账号付款，二维码已打码&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N8.png"&gt;&lt;/p&gt;
&lt;h3&gt;===第二步：一键部署VPS服务器===&lt;/h3&gt;
&lt;h3&gt;1 由主页的Client Area进入自己的搬瓦工账户&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N9.png"&gt;&lt;/p&gt;
&lt;h3&gt;2 按红色箭头标示，依次点击 Service, My Service，KiviVM Control Panel，之后进入KiviVM管理界面&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N10.png"&gt;&lt;/p&gt;
&lt;h3&gt;3 按红色箭头标示，点击start 启动服务器&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N11.png"&gt;&lt;/p&gt;
&lt;h3&gt;4 一键安装并启动ShadowsocksR，建议改一下端口号，我一般改成4位数&lt;/h3&gt;
&lt;h3&gt;5 根据你的使用的科学上网设备下载相应客户端,windows ssr下载地址链接: &lt;a href="https://github-production-release-asset-2e65be.s3.amazonaws.com/98547658/787c9470-731d-11e7-9284-a1c67a0abaec?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20171201%2Fus-east-1%2Fs3%2Faws4_request&amp;amp;X-Amz-Date=20171201T070154Z&amp;amp;X-Amz-Expires=300&amp;amp;X-Amz-Signature=a7c3c861b7c0dab8d669bacda6f08ce9e262799638368924546c240d0d3383c9&amp;amp;X-Amz-SignedHeaders=host&amp;amp;actor_id=0&amp;amp;response-content-disposition=attachment%3B%20filename%3DShadowsocksR-4.7.0-win.7z&amp;amp;response-content-type=application%2Foctet-stream"&gt;ShadowsocksR&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N12.png"&gt;  &lt;/p&gt;
&lt;h3&gt;===第三步：下载配置ShadowsocksR科学上网===&lt;/h3&gt;
&lt;h3&gt;1 下载客户端后, 解压缩，按箭头所示双击飞机图标&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N13.jpg"&gt;&lt;/p&gt;
&lt;h3&gt;2 根据KiviVM中ShadowsocksR GUI settings，填写自己ssr客户端的账号信息，然后点击确定&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N14.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N15.png"&gt;&lt;/p&gt;
&lt;h3&gt;3 选择PAC模式上网&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N16.png"&gt;&lt;/p&gt;
&lt;h3&gt;如果想分享给局域网内其他人使用,可以按照下面的步骤&lt;/h3&gt;
&lt;h3&gt;1 打开shadowsocksR选项设置,允许来自局域网的连接&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N17.png"&gt;&lt;/p&gt;
&lt;h3&gt;2 打开dos命令行,输入ipconfig查看自己电脑的IP地址&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N18.png"&gt;&lt;/p&gt;
&lt;h3&gt;3 把上一步得到的IP告知你要分享的人,让其按照如下操作设置即可&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/blog/master/images/ssr/N19.png"&gt;&lt;/p&gt;</content><category term="翻墙"></category></entry><entry><title>复现The most popular genes in the human genome</title><link href="jujuba.net/The%20most%20popular%20genes.html" rel="alternate"></link><published>2017-11-30T00:00:00+08:00</published><updated>2017-11-30T00:00:00+08:00</updated><author><name>seqyuan</name></author><id>tag:None,2017-11-30:jujuba.net/The most popular genes.html</id><summary type="html">&lt;p&gt;编程复现The most popular genes in the human genome文章两幅图形&lt;/p&gt;</summary><content type="html">&lt;p&gt;从14年入行接触编程至今除早期入门阶段外很少记编程笔记，更多的是从以前写过的程序里去找自己想要的东西，两年前写的主要代码的架构和重要元素依稀记得。&lt;/p&gt;
&lt;p&gt;前几天看到一篇文章《NATURE》长文：The most popular genes in the human genome，除了对文章的内容有很大兴趣之外，对于文中的图的精美也很向往，为了做matplotlib画图demo, 记录一些常用画图设置模板，我打算重现文中的两张图。&lt;/p&gt;
&lt;h3&gt;要重现原图如下&lt;/h3&gt;
&lt;p&gt;第一幅图是一个条形图,展示了被研究次数最多10个的基因
 第二幅图展示了所有基因的研究次数及基因在染色体上的位置&lt;/p&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/The_Most_Studied_Genes/N1.jpg"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/The_Most_Studied_Genes/N2.jpg"&gt;&lt;/p&gt;
&lt;h3&gt;下载的数据&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;顺藤摸瓜，找到做这个项目的github：https://github.com/pkerpedjiev/gene-citation-counts&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;发现人基因组所有基因被研究次数的文件https://github.com/pkerpedjiev/gene-citation-counts/all_gene_counts.tsv 果断下载&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;要重现第二幅图还需要基因组大小文件以及着丝粒在基因组上的位置信息，所以需要下载http://hgdownload.cse.ucsc.edu/goldenpath/hg19/database/chromInfo.txt.gz，http://hgdownload.cse.ucsc.edu/goldenPath/hg19/database/cytoBand.txt.gz&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在作者github这个项目的Issues里发现有人提了一个问题：你做的都是针对gene，尝试做一下ncRNA会有更有意思的东西发现吧。作者果断甩出一个文件链接gene_info_total_human.tsv，回答说所有的基因组元件citations信息都在这里，你感兴趣自己玩去。我果断下载之，发现文件中被研究最多的基因按照研究次数进行了排序，所以这个文件就作为了我重现第一幅图的数据源。ps：唯一的Issues已经被作者删除，当然包括gene_info_total_human.tsv的下载地址&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;第一幅图被重现，程序用法如下&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;python3 The_Most_Studied_Genes.py -i gene_info_total_human.tsv -n 20&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;第一幅效果如下&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/The_Most_Studied_Genes/The_top10_citations.png"&gt;
 &lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/The_Most_Studied_Genes/The_top20_citations.png"&gt;&lt;/p&gt;
&lt;h3&gt;第二幅图照虎画猫&lt;/h3&gt;
&lt;p&gt;输入参数就固定写了，程序和数据（all_gene_counts.tsv）放同一目录下，直接执行就会出结果，之所以没用gene_info_total_human.tsv作为数据源是因为gene_info_total_human.tsv不带有基因位置信息（省点事）&lt;/p&gt;
&lt;p&gt;&lt;code&gt;python3 gene_on_chrom.py&lt;/code&gt; &lt;/p&gt;
&lt;h3&gt;第二幅效果如下&lt;/h3&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/The_Most_Studied_Genes/gene_on_chrom.png"&gt;&lt;/p&gt;
&lt;p&gt;通过与原图的对比我发现和文章结果是一些出入的，在top10基因的排名上，有些不同，也许作者两组数据的产生时间稍有不同。如果想彻底问清楚可以一步步重现作者的搜集数据步骤，自己做数据搜集工作。&lt;/p&gt;
&lt;p&gt;还有点不同是对于着丝粒区域的处理，我是按照比例显示，原图是给了固定的数值&lt;/p&gt;
&lt;h3&gt;发现&lt;/h3&gt;
&lt;p&gt;X染色体上被研究最多的一个基因为AR(Androgen receptor),蛋白结构如下：&lt;/p&gt;
&lt;p&gt;&lt;img alt="AR PDB" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/The_Most_Studied_Genes/AR_PDB.png"&gt;&lt;/p&gt;
&lt;p&gt;在基因组上的位置&lt;/p&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/The_Most_Studied_Genes/AR-gene.png"&gt;&lt;/p&gt;
&lt;h3&gt;源代码&lt;/h3&gt;
&lt;p&gt;https://github.com/seqyuan/programs/master/plot/The_Most_Studied_Genes&lt;/p&gt;
&lt;h3&gt;微信公众号&lt;/h3&gt;
&lt;p&gt;下图是我的微信公众号，会写一些生物信息相关的文章，欢迎关注。&lt;/p&gt;
&lt;p&gt;&lt;img alt="avatar" src="https://raw.githubusercontent.com/seqyuan/programs/master/plot/The_Most_Studied_Genes/seqyuan.jpg"&gt;&lt;/p&gt;</content><category term="matplotlib"></category></entry><entry><title>linux常用总结</title><link href="jujuba.net/linux.html" rel="alternate"></link><published>2017-03-15T00:00:00+08:00</published><updated>2017-03-15T00:00:00+08:00</updated><author><name>seqyuan</name></author><id>tag:None,2017-03-15:jujuba.net/linux.html</id><summary type="html">&lt;p&gt;linux常用总结&lt;/p&gt;</summary><content type="html">&lt;h3&gt;实现linux集群间不同节切换无密码登录&lt;/h3&gt;
&lt;p&gt;在客户执行以下命令&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ssh-keygen -t rsa&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;出现以下结果&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Generating public/private rsa key pair.
Enter file in which to save the key (/home/yuanzan/.ssh/id_rsa):
/home/yuanzan/.ssh/id_rsa already exists.
Overwrite (y/n)? y
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/yuanzan/.ssh/id_rsa.
Your public key has been saved in /home/yuanzan/.ssh/id_rsa.pub.
The key fingerprint is:
63:f2:a8:5c:21:0b:da:70:da:ff:18:c0:ee:48:82:97 yuanzan@login-0-1.local
The key&amp;#39;s randomart image is:
+--[ RSA 2048]----+
|                 |
|                 |
|                 |
| .               |
|. = . o S        |
|.O + o * .       |
|=.E o o .        |
|o+ o =           |
|. . =..          |
+-----------------+
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;然后执行以下命令，添加pulic key 到 authorized_keys即可&lt;/p&gt;
&lt;p&gt;&lt;code&gt;cat ～/.ssh/id_rsa.pub &amp;gt;&amp;gt; ~/.ssh/authorized_keys&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;重新打开一个远程窗口就能在节点之间无密码切换了&lt;/p&gt;</content><category term="linux"></category></entry><entry><title>pelican blog</title><link href="jujuba.net/pelican%20for%20blog.html" rel="alternate"></link><published>2017-03-14T00:00:00+08:00</published><updated>2017-03-14T00:00:00+08:00</updated><author><name>seqyuan</name></author><id>tag:None,2017-03-14:jujuba.net/pelican for blog.html</id><summary type="html">&lt;p&gt;python pelican for blog&lt;/p&gt;</summary><content type="html">&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mkdir seqyuan_blog
cd blog
pelican-quickstart
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;git clone --branch gh-pages git@github.com:seqyuan/blog.git output&lt;/code&gt;
&lt;code&gt;make html&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cd output
git add -A
git commit -m &amp;quot;change log&amp;quot;
git push origin gh-pages
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Makefile:1: *** missing separator.  Stop.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;perl -pi -e 's/^  */\t/' Makefile&lt;/code&gt;&lt;/p&gt;</content><category term="pelican"></category></entry><entry><title>Chromebook Install Crouton in china</title><link href="jujuba.net/Chromebook%20Install%20Crouton%20in%20china.html" rel="alternate"></link><published>2017-03-13T00:00:00+08:00</published><updated>2017-03-13T00:00:00+08:00</updated><author><name>seqyuan</name></author><id>tag:None,2017-03-13:jujuba.net/Chromebook Install Crouton in china.html</id><summary type="html">&lt;p&gt;ASUS Chromebook C202通过crouton安装linux&lt;/p&gt;</summary><content type="html">&lt;p&gt;在 Chromebook 上面安装 Linux 发行版有2种方法：&lt;/p&gt;
&lt;p&gt;crouton：https://github.com/dnschneid/crouton&lt;/p&gt;
&lt;p&gt;ChrUbuntu：https://github.com/iantrich/ChrUbuntu-Guides&lt;/p&gt;
&lt;p&gt;crouton 是比较流行的安装方法，主要特点如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;可保留数据，不需要格式化&lt;/li&gt;
&lt;li&gt;方便切换（热切换）&lt;/li&gt;
&lt;li&gt;卸载方便（直接删除目录即可）&lt;/li&gt;
&lt;li&gt;需要科学上网&lt;/li&gt;
&lt;li&gt;每次 Chrome OS 升级后需要更新一下&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;一般crouton的安装教程从网上都能找到，但是真正安装的时候总会出现各种问题导致安装不成功，也许你会遇到同样的问题。下面的教程是我失N多总结的经验。&lt;/p&gt;
&lt;h1&gt;Install crouton&lt;/h1&gt;
&lt;h2&gt;开启开发者模式&lt;/h2&gt;
&lt;p&gt;如果你决定要通过 crouton 的方式安装Linux 发行版，你需要：&lt;/p&gt;
&lt;p&gt;一个已经开启开发者模式的 ChromeBook（关于开启开发者模式网上有很多教程，这里不另外叙述）&lt;/p&gt;
&lt;p&gt;有充足的电量&lt;/p&gt;
&lt;p&gt;良好的网络环境&lt;/p&gt;
&lt;h2&gt;下载 crouton&lt;/h2&gt;
&lt;p&gt;从github打下载crouton，网址：https://github.com/dnschneid/crouton&lt;/p&gt;
&lt;p&gt;下载后解压&lt;/p&gt;
&lt;h2&gt;修改crouton&lt;/h2&gt;
&lt;p&gt;更改解压后的crouton中targets/audio文件:&lt;/p&gt;
&lt;p&gt;第47行：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;( wget -O &amp;quot;$archive&amp;quot; &amp;quot;$urlbase/$ADHD_HEAD.tar.gz&amp;quot; 2&amp;gt;&amp;amp;1 \
                                    || echo &amp;quot;Error fetching CRAS&amp;quot; ) | tee &amp;quot;$log&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;改为：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;( wget -O &amp;quot;$archive&amp;quot; &amp;quot;http://t.cn/R46YOzM&amp;quot; 2&amp;gt;&amp;amp;1 \
                                    || echo &amp;quot;Error fetching CRAS&amp;quot; ) | tee &amp;quot;$log&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;make crouton&lt;/h2&gt;
&lt;p&gt;继上一步更targets/audio后，在crouton目录中执行&lt;/p&gt;
&lt;p&gt;&lt;code&gt;make&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;（在linux环境下执行make）&lt;/p&gt;
&lt;p&gt;会生成一个&lt;em&gt;crouton&lt;/em&gt;文件&lt;/p&gt;
&lt;p&gt;把这个&lt;em&gt;crouton&lt;/em&gt;文件放到你的chromebook的 ~/Downloads目录下&lt;/p&gt;
&lt;h2&gt;开始安装&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;在 Chrome OS 下按 Ctrl + Alt + T 打开命令行标签页，输入 shell 进入命令行。&lt;/li&gt;
&lt;li&gt;执行 sudo sh -e ~/Downloads/crouton -r trusty -t xfce -e 进行安装&lt;/li&gt;
&lt;li&gt;当出现下面的几行字符时，就表明安装成功：&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Here&amp;#39;s some tips:

Audio from the chroot will now be forwarded to CRAS (Chromium OS audio server),
through an ALSA plugin.

Future Chromium OS upgrades may break compatibility with the installed version
of CRAS. Should this happen, simply update your chroot.

You can flip through your running chroot desktops and Chromium OS by hitting
Ctrl+Alt+Shift+Back and Ctrl+Alt+Shift+Forward.

You already have the Chromium OS extension installed, so you&amp;#39;re good to go!

You can open your running chroot desktops by clicking on the extension icon.
Once in a crouton window, press fullscreen or the &amp;quot;switch window&amp;quot; key to switch
back to Chromium OS.

You can launch individual apps in crouton windows by using the &amp;quot;xiwi&amp;quot; command
in the chroot shell. Use startxiwi to launch directly from the host shell.
Use the startxiwi parameter -b to run in the background.
Example: sudo startxiwi -b xterm

You can start Xfce via the startxfce4 host command: sudo startxfce4
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;进入安装好的linux进行配置&lt;/h2&gt;
&lt;p&gt;执行以下命令进入linux桌面环境
&lt;code&gt;sudo startxfce4&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;安装中文语言包&lt;/h3&gt;
&lt;p&gt;因为安装后是什么都不带的系统，因此是英文系统，要使用中文语言先安装语言包：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install language-pack-zh-hans
sudo apt-get install language-pack-gnome-zh-hans
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;接下来安装语言选择器：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sudo apt-get install language-selector-gnome&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;安装好后应该就可以从 Settings-Language Support更改语言了&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sudo update-locale LANG="zh_CN.UTF-8" LANGUAGE="zh_cn:en"&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;之后重启即可变更为中文语言&lt;/p&gt;
&lt;h2&gt;使用linux&lt;/h2&gt;
&lt;p&gt;我一般情况下只用以下方式使用linux命令行，而不用桌面版环境&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ctrl + Alt + T 打开命令行标签页&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;输入 &lt;code&gt;shell&lt;/code&gt; 进入命令行&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sudo enter-chroot&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;进入linux命令行&lt;/p&gt;
&lt;p&gt;好处是一个网页标签就可以使用linux系统了，复制粘贴都方便&lt;/p&gt;
&lt;h2&gt;删除发行版&lt;/h2&gt;
&lt;p&gt;可以使用 &lt;code&gt;sudo delete-chroot chrootname&lt;/code&gt; 来删除发行版，其中 chrootname 一般是发行版代号&lt;/p&gt;
&lt;p&gt;也可以直接删除 /usr/local/chroot 里面的文件夹&lt;/p&gt;</content><category term="crouton"></category></entry></feed>